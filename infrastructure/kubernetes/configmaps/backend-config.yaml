apiVersion: v1
kind: ConfigMap
metadata:
  name: backend-config
  namespace: bugstracker-production
data:
  # Django settings
  DJANGO_SETTINGS_MODULE: "config.settings.production"
  ALLOWED_HOSTS: "api.bugstracker.com,www.bugstracker.com"
  DEBUG: "False"

  # Database
  DB_HOST: "postgres"
  DB_PORT: "5432"
  DB_NAME: "bugstracker"

  # Redis
  REDIS_URL: "redis://:${REDIS_PASSWORD}@redis:6379/0"
  CELERY_BROKER_URL: "redis://:${REDIS_PASSWORD}@redis:6379/1"
  CELERY_RESULT_BACKEND: "redis://:${REDIS_PASSWORD}@redis:6379/2"

  # Elasticsearch
  ELASTICSEARCH_URL: "http://elasticsearch:9200"

  # Channels (WebSocket)
  CHANNELS_REDIS_URL: "redis://:${REDIS_PASSWORD}@redis:6379/3"

  # Email (configure based on your email service)
  EMAIL_BACKEND: "django.core.mail.backends.smtp.EmailBackend"
  EMAIL_HOST: "smtp.gmail.com"
  EMAIL_PORT: "587"
  EMAIL_USE_TLS: "True"
  DEFAULT_FROM_EMAIL: "noreply@bugstracker.com"

  # AWS S3 (for media files - optional)
  USE_S3: "False"
  # AWS_STORAGE_BUCKET_NAME: "bugstracker-media"
  # AWS_S3_REGION_NAME: "us-east-1"

  # Logging
  LOG_LEVEL: "INFO"

  # Security
  SECURE_SSL_REDIRECT: "True"
  SESSION_COOKIE_SECURE: "True"
  CSRF_COOKIE_SECURE: "True"
  SECURE_HSTS_SECONDS: "31536000"
  SECURE_HSTS_INCLUDE_SUBDOMAINS: "True"
  SECURE_HSTS_PRELOAD: "True"

  # CORS
  CORS_ALLOWED_ORIGINS: "https://app.bugstracker.com,https://www.bugstracker.com"

  # Performance
  CONN_MAX_AGE: "600"
